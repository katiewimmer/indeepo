<html>

<head>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='styles.css') }}">
</head>

<body>
    <h1>Indeepo - FILMMAKER VIEW</h1>

    <h2>Enter your Film ID Number:</h2>
    <form action="/film" method="GET">
        <p>ID: <input type="text" name="filmID"> <input type="submit" value="Find" class="find-button"></p>
    </form>

    {% if film_not_found and request.args.get('filmID') %}
    <p>Film not found. Check your Film ID and try again</p>
    {% endif %}

    <h2>Film Information</h2>
    {% if film_info %}
    <ul>
        <li style="color: red;">Film ID: {{ film_info[0] }}</li>
        <li>Title: {{ film_info[1] }}</li>
        <li>Year: {{ film_info[2] }}</li>
        <li>Genre: {{ film_info[3] }}</li>
        <li>Description: {{ film_info[4] }}</li>
        <li>Stage of Production:
            {% if film_info[5] == 0 %}
            Planning
            {% elif film_info[5] == 1 %}
            Being Made
            {% elif film_info[5] == 2 %}
            Made
            {% else %}
            Unknown
            {% endif %}
        </li>
        <li>Budget: {{ film_info[6] }}</li>

        {% if school_info %}
        <li>School Information:</li>
        <ul>
            <li>Name: {{ school_info[0] }}</li>
            <li>Location: {{ school_info[1] }}</li>
        </ul>
        {% else %}
        <li>No school information available.</li>
        {% endif %}
    </ul>
    {% else %}
    <p>No film information available.</p>
    {% endif %}

    <div class="registration-form">
        <h2>Register a New Film</h2>
        <form action="/register_film" method="POST">
            <h4>Film ID is a unique 8-digit number beginning with a 2 (ex. 2xxxxxxx) <p></p>
                Please remember your ID number for future login!</h4>
            <label for="filmID">Film ID:</label>
            <input type="text" id="filmID" name="filmID" required>
            <p></p>
            <label for="title">Title:</label>
            <input type="text" id="title" name="title" required>

            <label for="year">Year:</label>
            <input type="number" id="year" name="year" required>

            <label for="genre">Genre:</label>
            <input type="text" id="genre" name="genre" required>
            <p></p>
            <label for="description">Description:</label>
            <textarea id="description" name="description" rows="4" cols="30" style="vertical-align: top;"
                required></textarea>

            <label for="stageOfProduction">Stage of Production:</label>
            <select id="stageOfProduction" name="stageOfProduction" required>
                <option value="0">Planning</option>
                <option value="1">Being Made</option>
                <option value="2">Made</option>
            </select>

            <p></p>
            <label for="budget">Budget:</label>
            <input type="number" step="0.01" id="budget" name="budget" required>

            <!-- New fields for School ID -->
            <p></p>
            <label for="schoolSelect">School:</label>
            <select id="schoolSelect" name="schoolSelect" required>
                {% for school in all_schools %}
                <option value="{{ school[0] }}">{{ school[1] }}</option>
                {% endfor %}
            </select>

            <!-- Hidden field to store the school ID -->
            <input type="hidden" id="schoolID" name="schoolID">

            <p></p>
            <input type="submit" value="Register Film">
            {% if error_message %}
            <p>Problem registering with given information:</p>
            <p style="color: red;">{{ error_message }}</p>
            {% endif %}
        </form>

        <!-- JavaScript to update the hidden 'schoolID' field -->
        <script>
            document.getElementById('schoolSelect').addEventListener('change', function () {
                // Set the hidden field value to the selected school ID
                document.getElementById('schoolID').value = this.value;
            });
        </script>
    </div>
    </div>
    {% if film_info %}
    <h2>Add Roles to the film</h2>
    <div class="role-addition-form">
        <form action="/add_role" method="POST">
            <label for="roleType">Role Type:</label>
                <select id="roleType" name="roleType" required>
                    <option value="" disabled selected>Select Role Type</option>
                    <option value="Director">Director</option>
                    <option value="Actor">Actor</option>
                    <option value="Producer">Producer</option>
                    <option value="Crew">Crew</option>
                </select>

            <label for="description">Description:</label>
            <input type="text" id="description" name="description" required>

            <label for="level">Level:</label>
            <input type="number" id="level" name="level" required>

            <!-- Additional fields for Director -->
            <div id="directorFields" class="role-fields" style="display: none;">
                <label for="salary">Salary:</label>
                <input type="number" step="0.01" id="salary" name="salary" required>
            </div>

            <!-- Additional fields for Actor -->
            <div id="actorFields" class="role-fields" style="display: none;">
                <label for="age">Age:</label>
                <input type="number" id="age" name="age" required>

                <label for="gender">Gender:</label>
                <input type="text" id="gender" name="gender" required>

                <label for="lineCount">Line Count:</label>
                <input type="number" id="lineCount" name="lineCount" required>

                <label for="pay">Pay:</label>
                <input type="number" step="0.01" id="pay" name="pay" required>
            </div>

            <!-- Additional fields for Producer -->
            <div id="producerFields" class="role-fields" style="display: none;">
                <label for="producerType">Type:</label>
                <input type="text" id="producerType" name="producerType" required>

                <label for="inGuild">In Guild:</label>
                <input type="number" id="inGuild" name="inGuild" required>

                <label for="percentStake">Percent Stake:</label>
                <input type="number" step="0.01" id="percentStake" name="percentStake" required>
            </div>

            <!-- Additional fields for Crew Member -->
            <div id="crewFields" class="role-fields" style="display: none;">
                <label for="hourlyRate">Hourly Rate:</label>
                <input type="number" step="0.01" id="hourlyRate" name="hourlyRate" required>
            </div>
            <p></p>
            <input type="submit" value="Add Role">
        </form>
    </div>

    <script>
        document.getElementById('roleType').addEventListener('change', function () {
            var selectedRole = this.value.toLowerCase();
            console.log("Selected Role:", selectedRole);
    
            // Hide all role fields
            document.querySelectorAll('.role-fields').forEach(function (field) {
                field.style.display = 'none';
            });
    
            // Show the selected role's fields
            document.getElementById(selectedRole + 'Fields').style.display = 'block';
        });
    </script>
    {% endif %}
</body>

</html>